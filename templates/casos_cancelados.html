{% extends 'base1.html' %}
{% load static %}

{% block head %}
<link rel="stylesheet" href="{% static 'css/registros.css' %}">
{% endblock head %}

{% block content %}
<div class="mt-3">
    <div class="row">
        <div class="col-sm-12">
            <div class="alert alert-primary" style="text-align: center;">
                <strong style="align-items: center;">Casos Cancelados</strong>
            </div>
        </div>
    </div>
    {% if regs %}
    <div class="row">
        <div class="col-md-4 mb-3">
            <input class="form-control" type="text" id="pesquisar-registros" placeholder="digite algo para pesquisar">
        </div>
        <form class="col" enctype="multipart/form-data" action="/export_data_csv/" method="get">
            {% csrf_token %}
            <div class="row">
                <div class="col mb-3">
                    <div class="input-group">
                        <span class="input-group-text">Início</span>
                        <input type="date" id="filtro_data_inicio" name="filtro_data_inicio" class="form-control">
                    </div>
                </div>
                <div class="col mb-3">
                    <div class="input-group">
                        <span class="input-group-text">Fim</span>
                        <input type="date" id="filtro_data_fim" name="filtro_data_fim" class="form-control">
                    </div>
                </div>
                <div class="col-md-auto mb-3">
                    <div class="d-grid gap-2 d-md-block">
                        <button type="submit" class="btn btn-primary">Exportar Dados</button>
                    </div>
                </div>
            </div>
        </form>
    </div>

    {% include 'messages/message.html' %}
    <div class="mt-4" id="content__table_id">
        <div class="table-responsive">
            <table class="table table-bordered" style="font-size: 80%;">
                <thead>
                    <th>Data Notificação</th>
                    <th>Nome Paciente</th>
                    <th>Data Nasc.</th>
                    <th>Nome da Mãe</th>
                    <th>Município de Residência</th>
                    <th>Município Notificador</th>
                    <th>Ações</th>
                </thead>
                <tbody id="table-registros">
                    {% for registro in regs %}
                    <tr class="table table-warning">
    
                        {% if registro.data_notificacao != None %}
                        <td>{{registro.data_notificacao}}</td>
                        {%else%}
                        <td></td>
                        {%endif%}
    
    
                        <td>{{registro.nome_paciente}}</td>
    
                        {% if registro.data_nascimento_paciente != None %}
                        <td>{{registro.data_nascimento_paciente}}</td>
                        {%else%}
                        <td></td>
                        {%endif%}
    
                        {% if registro.nome_mae_paciente == None %}
                        <td></td>
                        {% else %}
                        <td>{{registro.nome_mae_paciente}}</td>
                        {% endif %}
                        {% if registro.municipio_residencia != None %}
                        <td>{{registro.municipio_residencia}}</td>
                        {% else %}
                        <td></td>
                        {% endif %}
    
                        {% if registro.municipio != None %}
                        {% for i in municipios %}
                        {% if i.id == registro.municipio %}
                        <td>{{i}}</td>
                        {% endif %}
                        {% endfor %}
                        {% else %}
                        <td></td>
                        {% endif %}
    
                        <td align="center">
                            <button id="{{registro.id}}" type="button"
                                class="btn cancelar_caso btn-secondary btn-sm">Revalidar</button>
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
        {% else %}
        <h5 class="font-weight-bolder text-center mt-3">Nenhum caso cancelado.</h5>
        {% endif %}
    </div>
</div>
{% endblock content %}