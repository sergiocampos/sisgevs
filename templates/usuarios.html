{% extends 'base1.html' %}
{% load static %}

{% block head %}
<link rel="stylesheet" href="{% static '_esporotricose_humana/css/registros.css' %}">
<script src="{% static 'base/js/usuarios.js' %}" defer></script>
{% endblock head %}

{% block content %}
<div class="mt-3">
    <div class="alert alert-primary text-center">
        <h1 class="fs-2">Usuários</h1>
    </div>
    <div class="row">
        <div class="col">
            <input class="form-control" type="text" id="pesquisar-registros" placeholder="Pesquisar...">
        </div>        
    </div>
    
    {% include 'messages/message.html' %}
    <div class="mt-3">
        <div class="table-responsive">
            <table class="table table-bordered">
                <thead>
                    <th scope="col">ID</th>
                    <th scope="col">FUNÇÃO</th>
                    <th scope="col">EMAIL</th>
                    <th scope="col">TELEFONE</th>
                    <th scope="col">MUNICIPIO</th>
                    <th scope="col" class="text-center" colspan="{{request.user.lista_agravos_permite|length}}">AGRAVOS</th>
                </thead>
                <tbody id="table-registros">
                    {% for usuario in usuarios %}
                    <tr>
                        <td>{{usuario.id}}</td>
                        <td>{{usuario.funcao}}</td>
                        <td>{{usuario.email}}</td>
                        <td>{{usuario.telefone}}</td>
                        <td>{{usuario.municipio}}</td>

                        {% for agravo in request.user.lista_agravos_permite %}
                        
                        <td class="">                            
                            {% if agravo == 'esp-hum' %}
                                
                                {% if usuario.esp_hum %}
                                <input type="checkbox" class="form-check-input checkAgravo" name="esp-hum" id="{{usuario.id}}" value="esp-hum" checked>
                                {% else %}
                                <input type="checkbox" class="form-check-input checkAgravo" name="esp-hum" id="{{usuario.id}}" value="esp-hum">
                                {% endif %}
                                <label class="form-check-label" for="{{usuario.id}}">Esporotricose Humana</label>
                                {% if usuario.esp_hum_solicit %}
                                <span class="badge bg-danger">Solicitação</span>
                                {% endif %}                                

                            {% elif agravo == 'act' %}
                                
                                {% if usuario.act %}
                                <input type="checkbox" class="form-check-input checkAgravo" name="act" id="{{usuario.id}}" value="act" checked>
                                {% else %}
                                <input type="checkbox" class="form-check-input checkAgravo" name="act" id="{{usuario.id}}" value="act">
                                {% endif %}
                                <label class="form-check-label" for="{{usuario.id}}">Acidentes de Trânsito</label>
                                {% if usuario.act_solicit %}
                                <span class="badge bg-danger">Solicitação</span>
                                {% endif %}                                

                            {% endif %}
                        </td>

                        {% endfor %}
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
</div>
{% endblock content %}